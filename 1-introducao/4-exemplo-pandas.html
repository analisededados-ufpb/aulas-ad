<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.653">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Aulas AD 1 – exemplo-pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Aulas AD 1</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/analisededados-ufpb/aulas-ad">GitHub</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#exemplo-pandas" id="toc-exemplo-pandas" class="nav-link active" data-scroll-target="#exemplo-pandas">Exemplo Pandas</a>
  <ul class="collapse">
  <li><a href="#carregamento-de-dados" id="toc-carregamento-de-dados" class="nav-link" data-scroll-target="#carregamento-de-dados">Carregamento de dados</a></li>
  <li><a href="#concatenando-dataframes" id="toc-concatenando-dataframes" class="nav-link" data-scroll-target="#concatenando-dataframes">Concatenando DataFrames</a></li>
  <li><a href="#filtrando-dados" id="toc-filtrando-dados" class="nav-link" data-scroll-target="#filtrando-dados">Filtrando dados</a></li>
  <li><a href="#agrupando-por-coluna-e-sumarizando-dados" id="toc-agrupando-por-coluna-e-sumarizando-dados" class="nav-link" data-scroll-target="#agrupando-por-coluna-e-sumarizando-dados">Agrupando por coluna e sumarizando dados</a></li>
  <li><a href="#organizando-dados-tidy-data" id="toc-organizando-dados-tidy-data" class="nav-link" data-scroll-target="#organizando-dados-tidy-data">Organizando dados (tidy data)</a>
  <ul class="collapse">
  <li><a href="#média-da-turma-por-unidade" id="toc-média-da-turma-por-unidade" class="nav-link" data-scroll-target="#média-da-turma-por-unidade">Média da turma por unidade</a></li>
  <li><a href="#média-de-cada-aluno-em-cada-turma" id="toc-média-de-cada-aluno-em-cada-turma" class="nav-link" data-scroll-target="#média-de-cada-aluno-em-cada-turma">Média de cada aluno em cada turma</a></li>
  <li><a href="#média-geral-de-cada-turma" id="toc-média-geral-de-cada-turma" class="nav-link" data-scroll-target="#média-geral-de-cada-turma">Média geral de cada turma</a></li>
  <li><a href="#outras-estatísticas" id="toc-outras-estatísticas" class="nav-link" data-scroll-target="#outras-estatísticas">Outras estatísticas?</a></li>
  <li><a href="#adicionando-nova-coluna-aplicando-função-por-linha" id="toc-adicionando-nova-coluna-aplicando-função-por-linha" class="nav-link" data-scroll-target="#adicionando-nova-coluna-aplicando-função-por-linha">Adicionando nova coluna aplicando função por linha</a></li>
  <li><a href="#ordenando-as-médias-dos-alunos-da-maior-para-a-menor" id="toc-ordenando-as-médias-dos-alunos-da-maior-para-a-menor" class="nav-link" data-scroll-target="#ordenando-as-médias-dos-alunos-da-maior-para-a-menor">Ordenando as médias dos alunos da maior para a menor</a></li>
  <li><a href="#como-pegar-as-3-maiores-notas-de-cada-turma" id="toc-como-pegar-as-3-maiores-notas-de-cada-turma" class="nav-link" data-scroll-target="#como-pegar-as-3-maiores-notas-de-cada-turma">Como pegar as 3 maiores notas de cada turma?</a></li>
  </ul></li>
  <li><a href="#slicing" id="toc-slicing" class="nav-link" data-scroll-target="#slicing">Slicing</a></li>
  <li><a href="#saída-de-dados" id="toc-saída-de-dados" class="nav-link" data-scroll-target="#saída-de-dados">Saída de dados</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="exemplo-pandas" class="level1">
<h1>Exemplo Pandas</h1>
<p>Vamos usar um exemplo de análise para demonstrar mais funções da biblioteca Pandas de Python.</p>
<section id="carregamento-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregamento-de-dados">Carregamento de dados</h2>
<p>O primeiro passo será carregar os dados que estão armazenados em um arquivo CSV. O arquivo que possui as notas das 4 unidades da disciplina Sistemas Operacionais no período 2017.1. O parâmetro <code>index_col="id"</code> indica que a coluna <code>id</code> que consta no arquivo será o identificar das linhas do <em>DataFrame</em>.</p>
<div class="cell" data-execution_count="184">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>so_20171 <span class="op">=</span> pd.read_csv(<span class="st">"../dados/notas_so_20171.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>so_20171</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="184">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>8.3</td>
      <td>8.0</td>
      <td>9.3</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>7.0</td>
      <td>7.7</td>
      <td>4.6</td>
      <td>8.7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>7.8</td>
      <td>3.2</td>
      <td>7.7</td>
      <td>5.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>7.3</td>
      <td>9.3</td>
      <td>9.8</td>
      <td>4.8</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5.8</td>
      <td>9.8</td>
      <td>10.0</td>
      <td>6.8</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>9.6</td>
      <td>9.8</td>
      <td>10.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>9.0</td>
      <td>8.5</td>
      <td>8.5</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>4.0</td>
      <td>7.5</td>
      <td>5.3</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>10.0</td>
      <td>9.9</td>
      <td>9.6</td>
      <td>9.1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>8.3</td>
      <td>8.7</td>
      <td>8.0</td>
      <td>6.7</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>8.5</td>
      <td>9.8</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>7.3</td>
      <td>9.0</td>
      <td>7.8</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>8.8</td>
      <td>9.2</td>
      <td>10.0</td>
      <td>8.7</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>6.5</td>
      <td>8.6</td>
      <td>7.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>10.0</td>
      <td>8.5</td>
      <td>8.1</td>
      <td>8.5</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>9.7</td>
      <td>10.0</td>
      <td>7.7</td>
      <td>7.5</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>8.3</td>
      <td>9.7</td>
      <td>8.7</td>
      <td>6.8</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>7.5</td>
      <td>9.4</td>
      <td>6.0</td>
      <td>7.2</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>9.3</td>
      <td>9.9</td>
      <td>9.8</td>
      <td>9.1</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>0.0</td>
      <td>2.5</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>5.0</td>
      <td>8.0</td>
      <td>5.8</td>
      <td>4.8</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Podemos usar o comando <code>info()</code> para obter informações sobre os tipos das colunas e a presença de dados nulos:</p>
<div class="cell" data-execution_count="185">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>so_20171.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 21 entries, 0 to 20
Data columns (total 5 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   id      21 non-null     int64  
 1   nota_1  21 non-null     float64
 2   nota_2  21 non-null     float64
 3   nota_3  21 non-null     float64
 4   nota_4  21 non-null     float64
dtypes: float64(4), int64(1)
memory usage: 968.0 bytes</code></pre>
</div>
</div>
<p>Outra função útil é a <code>describe()</code>, que calcula estatísticas básicas para as colunas de um <em>DataFrame</em>:</p>
<div class="cell" data-execution_count="186">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>so_20171.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="186">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>21.000000</td>
      <td>21.000000</td>
      <td>21.000000</td>
      <td>21.000000</td>
      <td>21.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>11.000000</td>
      <td>7.595238</td>
      <td>8.438095</td>
      <td>7.771429</td>
      <td>6.742857</td>
    </tr>
    <tr>
      <th>std</th>
      <td>6.204837</td>
      <td>2.408003</td>
      <td>2.020266</td>
      <td>2.242129</td>
      <td>2.510492</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>2.500000</td>
      <td>1.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>6.000000</td>
      <td>7.000000</td>
      <td>8.000000</td>
      <td>7.000000</td>
      <td>5.100000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>11.000000</td>
      <td>8.300000</td>
      <td>9.000000</td>
      <td>8.100000</td>
      <td>7.200000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>16.000000</td>
      <td>9.300000</td>
      <td>9.800000</td>
      <td>9.600000</td>
      <td>8.700000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>21.000000</td>
      <td>10.000000</td>
      <td>10.000000</td>
      <td>10.000000</td>
      <td>9.800000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Já vimos que para calcular a média das notas de cada unidade podemos fazer:</p>
<div class="cell" data-execution_count="187">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>so_20171.mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="187">
<pre><code>id        11.000000
nota_1     7.595238
nota_2     8.438095
nota_3     7.771429
nota_4     6.742857
dtype: float64</code></pre>
</div>
</div>
<p>Suponha que queremos calcular a média das notas de cada uma das 4 unidades para todas as turmas de SO nos últimos 10 períodos. Para fazer do modo acima, precisaríamos de pelo menos 10 linhas de código, uma para cada turma. Isso não parece muito interessante. O jeito mais eficiente de fazer isso é juntar todos os dados em uma única tabela e aplicar funções em grupos de dados.</p>
<p>Vamos fazer um exemplo carregando os dados de mais um período (2017.2):</p>
<div class="cell" data-execution_count="188">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>so_20172 <span class="op">=</span> pd.read_csv(<span class="st">"../dados/notas_so_20172.csv"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>so_20172</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="188">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>9.8</td>
      <td>9.7</td>
      <td>9.5</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>9.2</td>
      <td>9.8</td>
      <td>7.0</td>
      <td>7.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>9.1</td>
      <td>8.0</td>
      <td>9.5</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>5.6</td>
      <td>7.8</td>
      <td>8.5</td>
      <td>6.5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>6.3</td>
      <td>8.0</td>
      <td>6.3</td>
      <td>5.5</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>6.6</td>
      <td>6.7</td>
      <td>7.2</td>
      <td>3.8</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>9.3</td>
      <td>9.0</td>
      <td>9.2</td>
      <td>8.5</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>8.7</td>
      <td>8.1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>7.8</td>
      <td>8.5</td>
      <td>9.0</td>
      <td>7.5</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>7.5</td>
      <td>8.0</td>
      <td>9.0</td>
      <td>5.3</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>8.3</td>
      <td>9.0</td>
      <td>5.2</td>
      <td>6.2</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>7.5</td>
      <td>9.8</td>
      <td>8.2</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>7.7</td>
      <td>7.3</td>
      <td>4.5</td>
      <td>6.5</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>5.8</td>
      <td>7.5</td>
      <td>6.5</td>
      <td>6.2</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>7.8</td>
      <td>9.3</td>
      <td>8.8</td>
      <td>4.5</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>0.0</td>
      <td>2.5</td>
      <td>2.0</td>
      <td>3.5</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>5.8</td>
      <td>8.3</td>
      <td>7.5</td>
      <td>3.5</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>9.6</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>5.5</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>7.0</td>
      <td>6.7</td>
      <td>6.6</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>7.3</td>
      <td>8.6</td>
      <td>7.3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>9.5</td>
      <td>8.8</td>
      <td>7.8</td>
      <td>6.2</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>7.3</td>
      <td>8.0</td>
      <td>6.7</td>
      <td>7.5</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>9.5</td>
      <td>8.8</td>
      <td>7.0</td>
      <td>8.3</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>9.7</td>
      <td>9.0</td>
      <td>3.4</td>
      <td>7.4</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>8.9</td>
      <td>6.7</td>
      <td>5.5</td>
      <td>4.5</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="concatenando-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="concatenando-dataframes">Concatenando DataFrames</h2>
<p>Note que a sua estrutura é semelhante à do <em>DataFrame</em> anterior. Desta forma, podemos juntá-los em um único data frame. Antes disso, temos que adicionar uma nova coluna que identifique o período que as notas se referem:</p>
<div class="cell" data-execution_count="189">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>so_20171[<span class="st">"periodo"</span>] <span class="op">=</span> <span class="st">"2017.1"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>so_20171.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="189">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
      <th>periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>8.3</td>
      <td>8.0</td>
      <td>9.3</td>
      <td>8.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>7.0</td>
      <td>7.7</td>
      <td>4.6</td>
      <td>8.7</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>7.8</td>
      <td>3.2</td>
      <td>7.7</td>
      <td>5.1</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>7.3</td>
      <td>9.3</td>
      <td>9.8</td>
      <td>4.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5.8</td>
      <td>9.8</td>
      <td>10.0</td>
      <td>6.8</td>
      <td>2017.1</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="190">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>so_20172[<span class="st">"periodo"</span>] <span class="op">=</span> <span class="st">"2017.2"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>so_20172.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="190">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
      <th>periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>9.8</td>
      <td>9.7</td>
      <td>9.5</td>
      <td>7.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>9.2</td>
      <td>9.8</td>
      <td>7.0</td>
      <td>7.2</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>9.1</td>
      <td>8.0</td>
      <td>9.5</td>
      <td>8.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>5.6</td>
      <td>7.8</td>
      <td>8.5</td>
      <td>6.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>6.3</td>
      <td>8.0</td>
      <td>6.3</td>
      <td>5.5</td>
      <td>2017.2</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>O comando <code>head()</code> mostra apenas as primeiras linhas da tabela.</p>
<p>Como os dois <em>DataFrames</em> possuem as mesmas colunas, podemos juntá-los com a função <a href="https://pandas.pydata.org/docs/reference/api/pandas.concat.html"><code>concat</code></a>:</p>
<div class="cell" data-execution_count="191">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>so <span class="op">=</span> pd.concat([so_20171, so_20172])</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>so</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="191">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
      <th>periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>8.3</td>
      <td>8.0</td>
      <td>9.3</td>
      <td>8.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>7.0</td>
      <td>7.7</td>
      <td>4.6</td>
      <td>8.7</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>7.8</td>
      <td>3.2</td>
      <td>7.7</td>
      <td>5.1</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>7.3</td>
      <td>9.3</td>
      <td>9.8</td>
      <td>4.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5.8</td>
      <td>9.8</td>
      <td>10.0</td>
      <td>6.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>9.6</td>
      <td>9.8</td>
      <td>10.0</td>
      <td>9.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>9.0</td>
      <td>8.5</td>
      <td>8.5</td>
      <td>8.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>4.0</td>
      <td>7.5</td>
      <td>5.3</td>
      <td>2.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>10.0</td>
      <td>9.9</td>
      <td>9.6</td>
      <td>9.1</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>8.3</td>
      <td>8.7</td>
      <td>8.0</td>
      <td>6.7</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>8.5</td>
      <td>9.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>7.3</td>
      <td>9.0</td>
      <td>7.8</td>
      <td>7.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>8.8</td>
      <td>9.2</td>
      <td>10.0</td>
      <td>8.7</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>6.5</td>
      <td>8.6</td>
      <td>7.0</td>
      <td>4.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>10.0</td>
      <td>8.5</td>
      <td>8.1</td>
      <td>8.5</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>9.7</td>
      <td>10.0</td>
      <td>7.7</td>
      <td>7.5</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>8.3</td>
      <td>9.7</td>
      <td>8.7</td>
      <td>6.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>7.5</td>
      <td>9.4</td>
      <td>6.0</td>
      <td>7.2</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>9.3</td>
      <td>9.9</td>
      <td>9.8</td>
      <td>9.1</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>0.0</td>
      <td>2.5</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>5.0</td>
      <td>8.0</td>
      <td>5.8</td>
      <td>4.8</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>9.8</td>
      <td>9.7</td>
      <td>9.5</td>
      <td>7.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>9.2</td>
      <td>9.8</td>
      <td>7.0</td>
      <td>7.2</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>9.1</td>
      <td>8.0</td>
      <td>9.5</td>
      <td>8.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>5.6</td>
      <td>7.8</td>
      <td>8.5</td>
      <td>6.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>6.3</td>
      <td>8.0</td>
      <td>6.3</td>
      <td>5.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>6.6</td>
      <td>6.7</td>
      <td>7.2</td>
      <td>3.8</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>9.3</td>
      <td>9.0</td>
      <td>9.2</td>
      <td>8.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>8.7</td>
      <td>8.1</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>7.8</td>
      <td>8.5</td>
      <td>9.0</td>
      <td>7.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>7.5</td>
      <td>8.0</td>
      <td>9.0</td>
      <td>5.3</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>8.3</td>
      <td>9.0</td>
      <td>5.2</td>
      <td>6.2</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>7.5</td>
      <td>9.8</td>
      <td>8.2</td>
      <td>6.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>7.7</td>
      <td>7.3</td>
      <td>4.5</td>
      <td>6.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>5.8</td>
      <td>7.5</td>
      <td>6.5</td>
      <td>6.2</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>7.8</td>
      <td>9.3</td>
      <td>8.8</td>
      <td>4.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>0.0</td>
      <td>2.5</td>
      <td>2.0</td>
      <td>3.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>5.8</td>
      <td>8.3</td>
      <td>7.5</td>
      <td>3.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>9.6</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>5.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>7.0</td>
      <td>6.7</td>
      <td>6.6</td>
      <td>8.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>7.3</td>
      <td>8.6</td>
      <td>7.3</td>
      <td>0.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>9.5</td>
      <td>8.8</td>
      <td>7.8</td>
      <td>6.2</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>7.3</td>
      <td>8.0</td>
      <td>6.7</td>
      <td>7.5</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>9.5</td>
      <td>8.8</td>
      <td>7.0</td>
      <td>8.3</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>9.7</td>
      <td>9.0</td>
      <td>3.4</td>
      <td>7.4</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>8.9</td>
      <td>6.7</td>
      <td>5.5</td>
      <td>4.5</td>
      <td>2017.2</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>E se quisermos saber as médias de cada período específico, usando a tabela com todas as notas? Vamos mostrar duas formas de fazer isso.</p>
</section>
<section id="filtrando-dados" class="level2">
<h2 class="anchored" data-anchor-id="filtrando-dados">Filtrando dados</h2>
<p>Podemos filtrar os dados de cada período e em seguida calcular a média da unidade 1:</p>
<div class="cell" data-execution_count="192">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>so[so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.1"</span>][<span class="st">"nota_1"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="192">
<pre><code>7.595238095238097</code></pre>
</div>
</div>
<div class="cell" data-execution_count="193">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>so[so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.2"</span>][<span class="st">"nota_1"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="193">
<pre><code>7.457692307692308</code></pre>
</div>
</div>
<p>Da mesma forma, podemos ver a fração de alunos com nota acima da média na unidade 1:</p>
<div class="cell" data-execution_count="194">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(so[(so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.1"</span>) <span class="op">&amp;</span> (so[<span class="st">"nota_1"</span>] <span class="op">&gt;=</span> <span class="dv">7</span>)].index) <span class="op">/</span> <span class="bu">len</span>(so[(so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.1"</span>)].index)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="194">
<pre><code>0.7619047619047619</code></pre>
</div>
</div>
<div class="cell" data-execution_count="195">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a> <span class="bu">len</span>(so[(so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.2"</span>) <span class="op">&amp;</span> (so[<span class="st">"nota_1"</span>] <span class="op">&gt;=</span> <span class="dv">7</span>)].index) <span class="op">/</span> <span class="bu">len</span>(so[(so[<span class="st">"periodo"</span>] <span class="op">==</span> <span class="st">"2017.2"</span>)].index)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="195">
<pre><code>0.7307692307692307</code></pre>
</div>
</div>
<p>Existe uma forma mais adequada para fazer esse tipo de cálculo agrupado por categoria.</p>
</section>
<section id="agrupando-por-coluna-e-sumarizando-dados" class="level2">
<h2 class="anchored" data-anchor-id="agrupando-por-coluna-e-sumarizando-dados">Agrupando por coluna e sumarizando dados</h2>
<p>A função <code>groupby</code> agrupa os dados de acordo com categorias definidas pelas colunas e aplica funções para cada grupo. A função <code>summarise</code> aplica uma função para cada grupo de dados, gerando novas colunas no data frame.</p>
<p>Vamos usar como exemplo o cálculo da média para cada unidade, agrupado por período:</p>
<div class="cell" data-execution_count="196">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>so_media <span class="op">=</span> so.groupby([<span class="st">"periodo"</span>]).mean()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>so_media</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="196">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>nota_4</th>
    </tr>
    <tr>
      <th>periodo</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017.1</th>
      <td>11.0</td>
      <td>7.595238</td>
      <td>8.438095</td>
      <td>7.771429</td>
      <td>6.742857</td>
    </tr>
    <tr>
      <th>2017.2</th>
      <td>13.5</td>
      <td>7.457692</td>
      <td>7.876923</td>
      <td>6.996154</td>
      <td>5.892308</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Como fazemos então para calcular a fração de aprovados na unidade 1 para cada período?</p>
<div class="cell" data-execution_count="197">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prop_aprovados(df, col<span class="op">=</span><span class="st">"nota_1"</span>, nota_aprovacao<span class="op">=</span><span class="dv">7</span>):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">len</span>(df[df[<span class="st">"nota_1"</span>] <span class="op">&gt;=</span> nota_aprovacao].index) <span class="op">/</span> <span class="bu">len</span>(df.index)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>so.groupby([<span class="st">"periodo"</span>]).<span class="bu">apply</span>(prop_aprovados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="197">
<pre><code>periodo
2017.1    0.761905
2017.2    0.730769
dtype: float64</code></pre>
</div>
</div>
<p>Ainda temos um incoveniente: ainda precisamos fazer cálculos especificando cada unidade que pretendemos observar. Além disso, se em algum dos períodos tivermos disciplinas com uma quantidade diferente de unidades (3 ao invés de 4) teríamos problemas com a estrutura atual. Vamos ver a seguir como organizar os dados de uma forma ainda mais adequada.</p>
</section>
<section id="organizando-dados-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="organizando-dados-tidy-data">Organizando dados (tidy data)</h2>
<p>Vamos carregar os dados de outras duas disciplinas, Sistemas Distribuídos e Avaliação de Desempenho, aproveitando para adicionar o nome da disciplina e o período no data frame:</p>
<div class="cell" data-execution_count="198">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ads_20171 <span class="op">=</span> pd.read_csv(<span class="st">"../dados/notas_ads_20171.csv"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ads_20171[<span class="st">"disciplina"</span>] <span class="op">=</span> <span class="st">"Avaliação de Desempenho de Sistemas"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>ads_20171[<span class="st">"periodo"</span>] <span class="op">=</span> <span class="st">"2017.1"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>ads_20171.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="198">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>disciplina</th>
      <th>periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>9.8</td>
      <td>7.0</td>
      <td>5.0</td>
      <td>Avaliação de Desempenho de Sistemas</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>8.8</td>
      <td>9.7</td>
      <td>3.5</td>
      <td>Avaliação de Desempenho de Sistemas</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>9.5</td>
      <td>7.0</td>
      <td>8.0</td>
      <td>Avaliação de Desempenho de Sistemas</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>7.0</td>
      <td>9.8</td>
      <td>9.8</td>
      <td>Avaliação de Desempenho de Sistemas</td>
      <td>2017.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>3.5</td>
      <td>8.8</td>
      <td>9.0</td>
      <td>Avaliação de Desempenho de Sistemas</td>
      <td>2017.1</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="199">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>sd_20172 <span class="op">=</span> pd.read_csv(<span class="st">"../dados/notas_sd_20172.csv"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>sd_20172[<span class="st">"disciplina"</span>] <span class="op">=</span> <span class="st">"Sistemas Distribuidos"</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>sd_20172[<span class="st">"periodo"</span>] <span class="op">=</span> <span class="st">"2017.2"</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>sd_20172.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="199">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nota_1</th>
      <th>nota_2</th>
      <th>nota_3</th>
      <th>disciplina</th>
      <th>periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>6.8</td>
      <td>8.0</td>
      <td>9.5</td>
      <td>Sistemas Distribuidos</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>4.2</td>
      <td>3.0</td>
      <td>9.5</td>
      <td>Sistemas Distribuidos</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>Sistemas Distribuidos</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>8.0</td>
      <td>7.5</td>
      <td>9.5</td>
      <td>Sistemas Distribuidos</td>
      <td>2017.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>7.0</td>
      <td>7.5</td>
      <td>10.0</td>
      <td>Sistemas Distribuidos</td>
      <td>2017.2</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Podemos juntar as notas de todas as disciplinas para facilitar o processamento. Mas temos um problema: as disciplinas de SO têm notas de 4 unidades, enquanto as de ADS e SD só têm 3 unidades. Além disso, ter uma coluna na tabela para cada unidade nos força a ter que especificar para qual unidade queremos calcular estatísticas. E se uma disciplina tiver 10 unidades (mini-testes, por exemplo), temos que ter 10 cálculos para calcular as médias de cada unidade?</p>
<p>Ai que entra o <a href="http://r4ds.had.co.nz/tidy-data.html"><em>tidy data</em></a>, que é uma forma de organizar os dados que facilita muito a análise usando as ferramentas de análise de dados.</p>
<p>Existem 3 regras para uma tabela ser <em>tidy</em>:</p>
<ul>
<li>Cada variável deve ter sua própria coluna.</li>
<li>Cada observação deve ter sua própria linha.</li>
<li>Cada valor deve ter sua própria célula.</li>
</ul>
<p>A figura abaixo mostra essas regras visualmente:</p>
<p><img src="figs/tidy_data.png" class="img-fluid"></p>
<p>Como transformar então nossas tabelas de notas no formato <em>tidy</em>? Um dos problems atuais é que a variável <em>nota</em> está espalhada em várias colunas: <em>nota_1</em>, <em>nota_2</em>, <em>nota_3</em>, … Temos outra variável implícita que está misturada com a variável nota que é a variável <em>unidade</em>, que pode indicar a qual unidade uma prova se refere. Desta forma, a tabela no formato tidy poderia ter uma coluna para a variável <em>unidade</em> e ter apenas uma coluna para a variável <em>nota</em>.</p>
<p>Vamos usar o Pandas para transformar os dados no formato <em>tidy</em>, usando funções de <em>reshaping e pivot tables</em> (leia <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html">este tutorial do Pandas</a> para entender mais).</p>
<p>Primeiro para as notas de Sistemas Operacionais, vamos adicionar uma coluna com o nome da disciplina e transformar as colunas <code>nota_1</code>, <code>nota_2</code>, <code>nota_3</code> e <code>nota_4</code> em duas colunas: <code>unidade</code> e <code>nota</code>. Ou seja, um aluno da turma ao invés de ter as 4 notas em apenas uma linha, ele terá as notas distribuídas em 4 linhas, uma para cada unidade. Para isto, vamos usar a função do Pandas <code>wide_to_long</code>:</p>
<div class="cell" data-execution_count="200">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>so[<span class="st">"disciplina"</span>] <span class="op">=</span> <span class="st">"Sistemas Operacionais"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>so_tidy <span class="op">=</span> pd.wide_to_long(so, stubnames<span class="op">=</span><span class="st">'nota'</span>, i<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'periodo'</span>, <span class="st">'disciplina'</span>],</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                          j<span class="op">=</span><span class="st">'unidade'</span>, sep<span class="op">=</span><span class="st">"_"</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>so_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="200">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>id</th>
      <th>periodo</th>
      <th>disciplina</th>
      <th>unidade</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">1</th>
      <th rowspan="4" valign="top">2017.1</th>
      <th rowspan="4" valign="top">Sistemas Operacionais</th>
      <th>1</th>
      <td>8.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.0</td>
    </tr>
    <tr>
      <th>2</th>
      <th>2017.1</th>
      <th>Sistemas Operacionais</th>
      <th>1</th>
      <td>7.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>25</th>
      <th>2017.2</th>
      <th>Sistemas Operacionais</th>
      <th>4</th>
      <td>7.4</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">26</th>
      <th rowspan="4" valign="top">2017.2</th>
      <th rowspan="4" valign="top">Sistemas Operacionais</th>
      <th>1</th>
      <td>8.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6.7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5.5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.5</td>
    </tr>
  </tbody>
</table>
<p>188 rows × 1 columns</p>
</div>
</div>
</div>
<p>O parâmetro <code>stubname='nota'</code> indica que ele vai transformar as colunas que começam com a palavra “nota”. O parâmetro <code>i=['id', 'periodo', 'disciplina']</code> indica as colunas que identificarão unicamente cada linha de observação (serão os índices). E o parâmetro <code>j='unidade'</code> indica o nome da nova coluna que será criada, onde os valores serão os números encontrados nas colunas <code>nota_X</code>, considerando que <code>sep="_"</code> e os nomes das colunas têm o formato <code>nota_unidade</code>.</p>
<p>Fazendo isso agora para as outras disciplinas e concatenando tudo em um único DataFrame. Vamos também renomear o index <code>id</code> para <code>id_aluno</code> para melhor compreensão dos dados. O parâmetro <code>inplace=True</code> faz com que o DataFrame <code>notas</code> seja alterado ao invés de retornar um novo DataFrame com a alteração realizada.</p>
<div class="cell" data-execution_count="201">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>ads_tidy <span class="op">=</span> pd.wide_to_long(ads_20171, stubnames<span class="op">=</span><span class="st">'nota'</span>, i<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'periodo'</span>, <span class="st">'disciplina'</span>], j<span class="op">=</span><span class="st">'unidade'</span>, sep<span class="op">=</span><span class="st">"_"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>sd_tidy <span class="op">=</span> pd.wide_to_long(sd_20172, stubnames<span class="op">=</span><span class="st">'nota'</span>, i<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'periodo'</span>, <span class="st">'disciplina'</span>], j<span class="op">=</span><span class="st">'unidade'</span>, sep<span class="op">=</span><span class="st">"_"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>notas <span class="op">=</span> pd.concat([so_tidy, ads_tidy, sd_tidy])</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>notas.index.set_names({<span class="st">'id'</span>: <span class="st">'id_aluno'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>notas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="201">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>id_aluno</th>
      <th>periodo</th>
      <th>disciplina</th>
      <th>unidade</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">1</th>
      <th rowspan="4" valign="top">2017.1</th>
      <th rowspan="4" valign="top">Sistemas Operacionais</th>
      <th>1</th>
      <td>8.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.0</td>
    </tr>
    <tr>
      <th>2</th>
      <th>2017.1</th>
      <th>Sistemas Operacionais</th>
      <th>1</th>
      <td>7.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">23</th>
      <th rowspan="2" valign="top">2017.2</th>
      <th rowspan="2" valign="top">Sistemas Distribuidos</th>
      <th>2</th>
      <td>9.7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">24</th>
      <th rowspan="3" valign="top">2017.2</th>
      <th rowspan="3" valign="top">Sistemas Distribuidos</th>
      <th>1</th>
      <td>9.8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9.5</td>
    </tr>
  </tbody>
</table>
<p>344 rows × 1 columns</p>
</div>
</div>
</div>
<p>Como calcular agora a nota média para cada disciplina, período e unidade? Ficou bem mais fácil.</p>
<section id="média-da-turma-por-unidade" class="level3">
<h3 class="anchored" data-anchor-id="média-da-turma-por-unidade">Média da turma por unidade</h3>
<div class="cell" data-execution_count="202">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>notas.groupby([<span class="st">"disciplina"</span>, <span class="st">"periodo"</span>, <span class="st">"unidade"</span>]).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="202">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>unidade</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="3" valign="top">2017.1</th>
      <th>1</th>
      <td>7.939286</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.382143</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.425000</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">Sistemas Distribuidos</th>
      <th rowspan="3" valign="top">2017.2</th>
      <th>1</th>
      <td>7.441667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6.729167</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8.895833</td>
    </tr>
    <tr>
      <th rowspan="8" valign="top">Sistemas Operacionais</th>
      <th rowspan="4" valign="top">2017.1</th>
      <th>1</th>
      <td>7.595238</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.438095</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.771429</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6.742857</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">2017.2</th>
      <th>1</th>
      <td>7.457692</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.876923</td>
    </tr>
    <tr>
      <th>3</th>
      <td>6.996154</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.892308</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="média-de-cada-aluno-em-cada-turma" class="level3">
<h3 class="anchored" data-anchor-id="média-de-cada-aluno-em-cada-turma">Média de cada aluno em cada turma</h3>
<div class="cell" data-execution_count="203">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>media_alunos <span class="op">=</span> notas.groupby([<span class="st">"disciplina"</span>, <span class="st">"periodo"</span>, <span class="st">"id_aluno"</span>]).mean()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>media_alunos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="203">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="5" valign="top">2017.1</th>
      <th>1</th>
      <td>7.266667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.333333</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8.166667</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.866667</td>
    </tr>
    <tr>
      <th>5</th>
      <td>7.100000</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Sistemas Operacionais</th>
      <th rowspan="5" valign="top">2017.2</th>
      <th>22</th>
      <td>1.250000</td>
    </tr>
    <tr>
      <th>23</th>
      <td>7.375000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>8.400000</td>
    </tr>
    <tr>
      <th>25</th>
      <td>7.375000</td>
    </tr>
    <tr>
      <th>26</th>
      <td>6.400000</td>
    </tr>
  </tbody>
</table>
<p>99 rows × 1 columns</p>
</div>
</div>
</div>
</section>
<section id="média-geral-de-cada-turma" class="level3">
<h3 class="anchored" data-anchor-id="média-geral-de-cada-turma">Média geral de cada turma</h3>
<div class="cell" data-execution_count="204">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>media_turma <span class="op">=</span> media_alunos.groupby([<span class="st">"disciplina"</span>, <span class="st">"periodo"</span>]).mean()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>media_turma</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="204">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Avaliação de Desempenho de Sistemas</th>
      <th>2017.1</th>
      <td>7.915476</td>
    </tr>
    <tr>
      <th>Sistemas Distribuidos</th>
      <th>2017.2</th>
      <td>7.688889</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Sistemas Operacionais</th>
      <th>2017.1</th>
      <td>7.636905</td>
    </tr>
    <tr>
      <th>2017.2</th>
      <td>7.055769</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="outras-estatísticas" class="level3">
<h3 class="anchored" data-anchor-id="outras-estatísticas">Outras estatísticas?</h3>
<p>E se eu quiser calcular outras estatísticas como a quantidade de alunos, nota mínima, mediana, média e máxima? Podemos usar a função <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.agg.html"><code>agg</code></a> para aplicar várias funções de agregação nos dados.</p>
<div class="cell" data-execution_count="205">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prop_aprovados(medias, min_media_aprovacao<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> medias[medias <span class="op">&gt;=</span> min_media_aprovacao].count() <span class="op">/</span> medias.count()</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    media_alunos</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"disciplina"</span>, <span class="st">"periodo"</span>])</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    .agg([<span class="st">'count'</span>, <span class="st">'min'</span>, <span class="st">'median'</span>, <span class="st">'mean'</span>, <span class="st">'max'</span>, prop_aprovados])</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="205">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="6" halign="left">nota</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>min</th>
      <th>median</th>
      <th>mean</th>
      <th>max</th>
      <th>prop_aprovados</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Avaliação de Desempenho de Sistemas</th>
      <th>2017.1</th>
      <td>28</td>
      <td>0.000</td>
      <td>8.266667</td>
      <td>7.915476</td>
      <td>10.00</td>
      <td>0.892857</td>
    </tr>
    <tr>
      <th>Sistemas Distribuidos</th>
      <th>2017.2</th>
      <td>24</td>
      <td>0.000</td>
      <td>8.250000</td>
      <td>7.688889</td>
      <td>10.00</td>
      <td>0.916667</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Sistemas Operacionais</th>
      <th>2017.1</th>
      <td>21</td>
      <td>0.875</td>
      <td>8.100000</td>
      <td>7.636905</td>
      <td>9.65</td>
      <td>0.904762</td>
    </tr>
    <tr>
      <th>2017.2</th>
      <td>26</td>
      <td>1.250</td>
      <td>7.375000</td>
      <td>7.055769</td>
      <td>9.00</td>
      <td>0.923077</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Você também pode aplicar uma função própria, por exemplo a que calcula a proporção de alunos aprovados em cada disciplina, que conta as linhas apenas de alunos com nota maior ou igual à 5 e divide pela quantidade total de alunos dentro do grupo:</p>
<div class="cell" data-execution_count="206">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prop_aprovados(medias, min_media_aprovacao<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> medias[medias <span class="op">&gt;=</span> min_media_aprovacao].count() <span class="op">/</span> medias.count()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    media_alunos</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"disciplina"</span>, <span class="st">"periodo"</span>])</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    .agg([prop_aprovados])</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="st">"APROVADO"</span> <span class="cf">if</span> media_alunos[<span class="st">"nota"</span>] <span class="op">&gt;=</span> <span class="dv">5</span> <span class="cf">else</span> <span class="st">"REPROVADO"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>SyntaxError: invalid syntax (2677895194.py, line 8)</code></pre>
</div>
</div>
</section>
<section id="adicionando-nova-coluna-aplicando-função-por-linha" class="level3">
<h3 class="anchored" data-anchor-id="adicionando-nova-coluna-aplicando-função-por-linha">Adicionando nova coluna aplicando função por linha</h3>
<p>Vamos adicionar uma coluna na tabela indicando se o aluno foi aprovado por média ou não. Para isso, vamos criar a nova função e aplicá-la para cada linha do dataframe com a função <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html"><code>apply</code></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calcula_resultado(media):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'APROVADO'</span> <span class="cf">if</span> media <span class="op">&gt;=</span> <span class="dv">5</span> <span class="cf">else</span> <span class="st">'REPROVADO'</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>media_alunos[<span class="st">"resultado"</span>] <span class="op">=</span> media_alunos[<span class="st">"nota"</span>].<span class="bu">apply</span>(calcula_resultado)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>media_alunos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="161">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
      <th>resultado</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="5" valign="top">2017.1</th>
      <th>1</th>
      <td>7.266667</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.333333</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8.166667</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.866667</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>5</th>
      <td>7.100000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Sistemas Operacionais</th>
      <th rowspan="5" valign="top">2017.2</th>
      <th>22</th>
      <td>1.250000</td>
      <td>REPROVADO</td>
    </tr>
    <tr>
      <th>23</th>
      <td>7.375000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>24</th>
      <td>8.400000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>25</th>
      <td>7.375000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>26</th>
      <td>6.400000</td>
      <td>APROVADO</td>
    </tr>
  </tbody>
</table>
<p>99 rows × 2 columns</p>
</div>
</div>
</div>
</section>
<section id="ordenando-as-médias-dos-alunos-da-maior-para-a-menor" class="level3">
<h3 class="anchored" data-anchor-id="ordenando-as-médias-dos-alunos-da-maior-para-a-menor">Ordenando as médias dos alunos da maior para a menor</h3>
<p>A função <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sort_values.html"><code>sort_values</code></a> ordena o dataframe com base nos valores de uma ou mais colunas. O parâmetro <code>ascending=False</code> é usado para indicar que a ordenação não será feita na ordem padrão ascendente (ou seja, será na ordem descendente do maior para o menor valor).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>media_alunos.sort_values(<span class="st">'nota'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="162">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
      <th>resultado</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="3" valign="top">2017.1</th>
      <th>9</th>
      <td>10.000000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10.000000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>23</th>
      <td>10.000000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Sistemas Distribuidos</th>
      <th rowspan="2" valign="top">2017.2</th>
      <th>12</th>
      <td>10.000000</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9.933333</td>
      <td>APROVADO</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Sistemas Operacionais</th>
      <th>2017.2</th>
      <th>22</th>
      <td>1.250000</td>
      <td>REPROVADO</td>
    </tr>
    <tr>
      <th>2017.1</th>
      <th>20</th>
      <td>0.875000</td>
      <td>REPROVADO</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Sistemas Distribuidos</th>
      <th rowspan="2" valign="top">2017.2</th>
      <th>8</th>
      <td>0.666667</td>
      <td>REPROVADO</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.000000</td>
      <td>REPROVADO</td>
    </tr>
    <tr>
      <th>Avaliação de Desempenho de Sistemas</th>
      <th>2017.1</th>
      <th>20</th>
      <td>0.000000</td>
      <td>REPROVADO</td>
    </tr>
  </tbody>
</table>
<p>99 rows × 2 columns</p>
</div>
</div>
</div>
</section>
<section id="como-pegar-as-3-maiores-notas-de-cada-turma" class="level3">
<h3 class="anchored" data-anchor-id="como-pegar-as-3-maiores-notas-de-cada-turma">Como pegar as 3 maiores notas de cada turma?</h3>
<p>Pega o dataframe com a média dos alunos, ordena pela média em ordem decrescente, agrupa por turma (disciplina e período) e pega as 3 primeiras linhas de cada grupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    media_alunos</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">'nota'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">'disciplina'</span>, <span class="st">'periodo'</span>])</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    .head(<span class="dv">3</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="3" valign="top">2017.1</th>
      <th>9</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>23</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">Sistemas Distribuidos</th>
      <th rowspan="3" valign="top">2017.2</th>
      <th>12</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9.933333</td>
    </tr>
    <tr>
      <th>23</th>
      <td>9.900000</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">Sistemas Operacionais</th>
      <th rowspan="3" valign="top">2017.1</th>
      <th>9</th>
      <td>9.650000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>9.600000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>9.575000</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">2017.2</th>
      <th>1</th>
      <td>9.000000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>9.000000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8.950000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Note que organizamos a sequência de comandos com uma função por linha. Essa forma fica mais legível quando se tem muitos comandos seguidos. Como cada função retorna um dataframe, dá para encadear chamadas de funções dessa forma no Pandas. Para funcionar com um comando por linha é preciso colocar a sequência de funções entre parênteses.</p>
</section>
</section>
<section id="slicing" class="level2">
<h2 class="anchored" data-anchor-id="slicing">Slicing</h2>
<p>Outra utilidade do Pandas é pegar apenas “fatias” (<em>slices</em>) dos dados, seja filtrando linhas ou colunas. O pandas oferece a função <code>.loc</code> para fazer o slicing a partir dos índices e a função <code>.iloc</code> para filtrar com base no número da linha.</p>
<p>Por exemplo, para pegar apenas as linhas que tem “Sistemas Operacionais” como primeiro índice (disciplina), podemos usar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>media_alunos.loc[<span class="st">"Sistemas Distribuidos"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="137">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="24" valign="top">2017.2</th>
      <th>1</th>
      <td>8.100000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5.566667</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>8.333333</td>
    </tr>
    <tr>
      <th>5</th>
      <td>8.166667</td>
    </tr>
    <tr>
      <th>6</th>
      <td>9.533333</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8.433333</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.666667</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9.933333</td>
    </tr>
    <tr>
      <th>10</th>
      <td>6.266667</td>
    </tr>
    <tr>
      <th>11</th>
      <td>9.700000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>7.666667</td>
    </tr>
    <tr>
      <th>14</th>
      <td>6.033333</td>
    </tr>
    <tr>
      <th>15</th>
      <td>9.133333</td>
    </tr>
    <tr>
      <th>16</th>
      <td>7.266667</td>
    </tr>
    <tr>
      <th>17</th>
      <td>8.833333</td>
    </tr>
    <tr>
      <th>18</th>
      <td>7.566667</td>
    </tr>
    <tr>
      <th>19</th>
      <td>8.766667</td>
    </tr>
    <tr>
      <th>20</th>
      <td>9.833333</td>
    </tr>
    <tr>
      <th>21</th>
      <td>7.933333</td>
    </tr>
    <tr>
      <th>22</th>
      <td>7.800000</td>
    </tr>
    <tr>
      <th>23</th>
      <td>9.900000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>9.100000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>E se quisermos pegar apenas as linhas 5 a 10 do DataFrame podemos usar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>media_alunos.iloc[<span class="dv">5</span>:<span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>nota</th>
    </tr>
    <tr>
      <th>disciplina</th>
      <th>periodo</th>
      <th>id_aluno</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Avaliação de Desempenho de Sistemas</th>
      <th rowspan="5" valign="top">2017.1</th>
      <th>6</th>
      <td>8.200000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>9.933333</td>
    </tr>
    <tr>
      <th>8</th>
      <td>3.766667</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Podemos também fazer um slice de linha e coluna ao mesmo tempo. Por exemplo, para filtrar as linhas com índices de 0 a 4 e a coluna <code>nota_3</code>, podemos fazer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>so.loc[<span class="dv">0</span>:<span class="dv">4</span>, <span class="st">"nota_3"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="146">
<pre><code>0     9.3
1     4.6
2     7.7
3     9.8
4    10.0
Name: nota_3, dtype: float64</code></pre>
</div>
</div>
<p>Ou para pegar o valor que está na linha 10 e coluna 3 (lembrando que Python indexa a partir do 0):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>so.iloc[<span class="dv">10</span>, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="156">
<pre><code>8.5</code></pre>
</div>
</div>
</section>
<section id="saída-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="saída-de-dados">Saída de dados</h2>
<p>Também podemos exportar um dataframe pra um arquivo. Por exemplo, para exportar a tabela de média dos alunos para um arquivo podemos rodar:</p>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>media_alunos.to_csv(<span class="st">"../dados/notas_medias_alunos.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>